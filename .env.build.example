# Enclii Build Pipeline Configuration
# Copy this to .env and customize for your environment

# ============================================================================
# BUILD PIPELINE CONFIGURATION
# ============================================================================

# Build work directory (where repositories are cloned for building)
BUILD_WORK_DIR=/tmp/enclii-builds

# Build cache directory (speeds up subsequent builds)
BUILD_CACHE_DIR=/var/cache/enclii-builds

# Build timeout in seconds (default: 1800 = 30 minutes)
BUILD_TIMEOUT=1800

# Container registry URL (where built images are pushed)
# Examples:
#   - GitHub Container Registry: ghcr.io/your-org
#   - Docker Hub: docker.io/your-username
#   - Google Container Registry: gcr.io/your-project
#   - AWS ECR: 123456789.dkr.ecr.us-east-1.amazonaws.com
REGISTRY=ghcr.io/madfam-io

# Docker configuration directory (contains registry credentials)
# Default: $HOME/.docker
DOCKER_CONFIG=/root/.docker

# ============================================================================
# DATABASE CONFIGURATION
# ============================================================================

# PostgreSQL connection string
# Format: postgres://user:password@host:port/database?sslmode=disable
ENCLII_DB_URL=postgres://enclii:enclii@localhost:5432/enclii?sslmode=disable

# ============================================================================
# REDIS CONFIGURATION (Optional - for caching)
# ============================================================================

# Redis address
REDIS_ADDR=localhost:6379

# Redis password (leave empty if no password)
REDIS_PASSWORD=

# Redis database number (0-15)
REDIS_DB=0

# ============================================================================
# KUBERNETES CONFIGURATION
# ============================================================================

# Kubernetes context to use (defaults to current context)
ENCLII_KUBE_CONTEXT=kind-enclii

# Kubeconfig file path (defaults to ~/.kube/config)
KUBECONFIG=/root/.kube/config

# ============================================================================
# API SERVER CONFIGURATION
# ============================================================================

# Port for API server
ENCLII_PORT=8080

# Environment (development, staging, production)
ENCLII_ENVIRONMENT=development

# Log level (debug, info, warn, error)
ENCLII_LOG_LEVEL=info

# ============================================================================
# AUTHENTICATION CONFIGURATION
# ============================================================================

# OIDC Issuer URL (for SSO)
# For development, you can use a local OIDC provider like Dex
ENCLII_OIDC_ISSUER=http://localhost:5556

# OIDC Client ID
ENCLII_OIDC_CLIENT_ID=enclii

# OIDC Client Secret
ENCLII_OIDC_CLIENT_SECRET=enclii-secret

# ============================================================================
# OBSERVABILITY CONFIGURATION
# ============================================================================

# OpenTelemetry/Jaeger endpoint for traces
ENCLII_OTEL_JAEGER_ENDPOINT=http://localhost:14268/api/traces

# Enable metrics collection
ENCLII_METRICS_ENABLED=true

# Metrics port
ENCLII_METRICS_PORT=9090

# ============================================================================
# BUILD TOOL SPECIFIC CONFIGURATION
# ============================================================================

# Buildpacks builder image
# Default: paketocommunity/builder-ubi-base:latest
# Alternatives:
#   - paketobuildpacks/builder:base
#   - paketobuildpacks/builder:full
#   - heroku/builder:22
BUILDPACKS_BUILDER=paketocommunity/builder-ubi-base:latest

# Docker BuildKit mode (0 = disabled, 1 = enabled)
DOCKER_BUILDKIT=1

# Maximum concurrent builds (0 = unlimited)
MAX_CONCURRENT_BUILDS=3

# ============================================================================
# FEATURE FLAGS
# ============================================================================

# Enable SBOM generation (requires syft installed)
ENABLE_SBOM=false

# Enable image signing (requires cosign installed)
ENABLE_IMAGE_SIGNING=false

# Enable vulnerability scanning (requires trivy installed)
ENABLE_VULNERABILITY_SCAN=false

# ============================================================================
# ADVANCED CONFIGURATION
# ============================================================================

# Default deployment region
ENCLII_DEFAULT_REGION=us-east

# Rate limiting (requests per minute)
ENCLII_RATE_LIMIT=1000

# Enable caching
ENCLII_CACHE_ENABLED=true

# Cache TTL in seconds (default: 300 = 5 minutes)
ENCLII_CACHE_TTL=300
