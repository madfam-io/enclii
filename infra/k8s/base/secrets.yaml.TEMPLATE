---
# PostgreSQL Secret
# IMPORTANT: This is a TEMPLATE file. DO NOT commit actual secrets to git.
# Use external secret management (Sealed Secrets, Vault, etc.) in production.
apiVersion: v1
kind: Secret
metadata:
  name: postgres-credentials
  labels:
    app: postgres
    app.kubernetes.io/name: postgres
    app.kubernetes.io/component: database
    app.kubernetes.io/part-of: enclii
type: Opaque
stringData:
  username: <POSTGRES_USERNAME>
  password: <POSTGRES_PASSWORD>
  database: <POSTGRES_DATABASE>
  database-url: "postgres://<USERNAME>:<PASSWORD>@postgres:5432/<DATABASE>?sslmode=require"

---
# Redis Secret
apiVersion: v1
kind: Secret
metadata:
  name: redis-secret
  namespace: enclii-system
type: Opaque
stringData:
  password: <REDIS_PASSWORD>

---
# JWT Secret for token signing
# IMPORTANT: Generate proper RSA keys in production
# Use: openssl genrsa -out private.pem 2048
#      openssl rsa -in private.pem -pubout -out public.pem
apiVersion: v1
kind: Secret
metadata:
  name: jwt-secrets
  labels:
    app.kubernetes.io/name: switchyard-api
    app.kubernetes.io/component: control-plane
    app.kubernetes.io/part-of: enclii
type: Opaque
stringData:
  jwt-secret: <JWT_SECRET_KEY>
  jwt-issuer: "enclii-production"
  private-key: |
    <PASTE_PRIVATE_KEY_PEM_HERE>
  public-key: |
    <PASTE_PUBLIC_KEY_PEM_HERE>

---
# Container Registry Secret
apiVersion: v1
kind: Secret
metadata:
  name: registry-secret
  namespace: enclii-system
type: kubernetes.io/dockerconfigjson
stringData:
  .dockerconfigjson: |
    {
      "auths": {
        "ghcr.io": {
          "username": "<GITHUB_USERNAME>",
          "password": "<GITHUB_TOKEN>"
        }
      }
    }

---
# Application Configuration Secret
apiVersion: v1
kind: Secret
metadata:
  name: switchyard-secret
  namespace: enclii-system
type: Opaque
stringData:
  database-url: <DATABASE_URL>
  redis-url: <REDIS_URL>
  oidc-client-secret: <OIDC_CLIENT_SECRET>
  registry-url: <REGISTRY_URL>
  build-cache-dir: /tmp/enclii-cache

---
# TLS Certificate Secret (for HTTPS)
# IMPORTANT: Use cert-manager in production for automatic certificate management
apiVersion: v1
kind: Secret
metadata:
  name: tls-secret
  namespace: enclii-system
type: kubernetes.io/tls
data:
  tls.crt: <BASE64_ENCODED_CERTIFICATE>
  tls.key: <BASE64_ENCODED_PRIVATE_KEY>
