# DocGuard Workflow - Documentation Quality Enforcement
#
# Part of the Solarpunk Foundry ecosystem
# Checks: env var documentation, banned terminology, dead links
#
# Source: https://github.com/madfam-org/solarpunk-foundry

name: Documentation Lint

on:
  push:
    branches: [main]
    paths:
      - 'docs/**'
      - '*.md'
      - '.env.example'
  pull_request:
    branches: [main]
    paths:
      - 'docs/**'
      - '*.md'
      - '.env.example'

jobs:
  doc-guard:
    name: DocGuard
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4

      - name: Run DocGuard
        uses: madfam-org/solarpunk-foundry/.github/actions/doc-guard@main
        with:
          doc-path: './docs'
          strict: false  # Start with warnings only, enable strict after cleanup
          check-links: false  # Disabled: 78 pre-existing dead links (internal K8s URLs, auth-protected endpoints, example URLs)
          # TODO: Enable after docs cleanup - many are false positives:
          # - Internal service URLs (switchyard-api.enclii.svc.cluster.local)
          # - Auth-protected endpoints returning 401/403
          # - Example URLs with placeholders ({zone_id}, {service_id})
          # - Temporarily down services (502 errors)
